{
  "version": 3,
  "sources": ["../vue-near/src/index.js", "dep:vue-near"],
  "sourcesContent": ["// Optional config, can be passed in before plugin install:\n// {\n//   appTitle: '',\n//   contractName: '',\n// }\nexport function getConfig(env, options = {}) {\n  const config = {\n    ...options,\n    appTitle: options.appTitle || 'NEAR',\n    contractName: options.contractName || 'test.near',\n  }\n\n  switch (env) {\n    case 'production':\n    case 'mainnet':\n      return {\n        ...config,\n        networkId: 'mainnet',\n        nodeUrl: 'https://rpc.mainnet.near.org',\n        explorerUrl: 'https://explorer.near.org',\n        walletUrl: 'https://wallet.near.org',\n        helperUrl: 'https://helper.mainnet.near.org'\n      }\n    case 'development':\n    case 'testnet':\n      return {\n        ...config,\n        networkId: 'default',\n        nodeUrl: 'https://rpc.testnet.near.org',\n        explorerUrl: 'https://explorer.testnet.near.org',\n        walletUrl: 'https://wallet.testnet.near.org',\n        helperUrl: 'https://helper.testnet.near.org'\n      }\n    case 'betanet':\n      return {\n        ...config,\n        networkId: 'betanet',\n        nodeUrl: 'https://rpc.betanet.near.org',\n        explorerUrl: 'https://explorer.betanet.near.org',\n        walletUrl: 'https://wallet.betanet.near.org',\n        helperUrl: 'https://helper.betanet.near.org'\n      }\n    case 'local':\n      return {\n        ...config,\n        networkId: 'local',\n        nodeUrl: 'http://localhost:3030',\n        keyPath: `${process.env.HOME}/.near/validator_key.json`,\n        walletUrl: 'http://localhost:4000/wallet',\n      }\n    case 'test':\n    case 'ci':\n      return {\n        ...config,\n        networkId: 'shared-test',\n        nodeUrl: 'https://rpc.ci-testnet.near.org',\n        masterAccount: 'test.near'\n      }\n    case 'ci-betanet':\n      return {\n        ...config,\n        networkId: 'shared-test-staging',\n        nodeUrl: 'https://rpc.ci-betanet.near.org',\n        masterAccount: 'test.near'\n      }\n    default:\n      throw Error(`Unconfigured environment '${env}'. Can be configured in src/config.js.`)\n  }\n}\n\nexport class VueNear {\n  constructor(env, config) {\n    // loading via CDN, requires adding this line to index.html:\n    // <script src=\"https://cdn.jsdelivr.net/gh/nearprotocol/near-api-js/dist/near-api-js.js\" ></script>\n    if (!window || !window.nearApi) return\n    this.nearApi = { ...window.nearApi }\n    this.config = getConfig(env, config)\n    this.near = null\n    this.keystore = null\n    this.user = null\n\n    return this\n  }\n  \n  async loadNearProvider() {\n    this.keystore = new this.nearApi.keyStores.BrowserLocalStorageKeyStore(window.localStorage, 'nearlib:keystore:')\n    this.near = await this.nearApi.connect(Object.assign({ deps: { keyStore: this.keystore } }, this.config))\n    return this\n  }\n\n  async loadAccount() {\n    // Needed to access wallet\n    this.walletConnection = new this.nearApi.WalletConnection(this.near)\n    this.user = new this.nearApi.WalletAccount(this.near)\n\n    if (this.walletConnection.getAccountId()) {\n      this.user.accountId = this.walletConnection.getAccountId()\n      this.user.balance = (await this.walletConnection.account().state()).amount\n    }\n\n    return this\n  }\n\n  async loginAccount() {\n    if (this.user && this.user.isSignedIn()) return this.user\n    const appTitle = this.config.appTitle || 'NEAR'\n    await this.user.requestSignIn(this.config.contractName, appTitle)\n\n    // returns full access key?! CAREFUL!\n    // await this.user.requestSignIn('')\n\n    // re-load account\n    return this.loadAccount()\n  }\n\n  async logoutAccount() {\n    this.walletConnection = new this.nearApi.WalletConnection(this.near)\n    this.user = new this.nearApi.WalletAccount(this.near)\n    await this.user.signOut()\n\n    this.keystore = null\n    this.user = null\n  }\n\n  async getContractInstance(contract_id, abiMethods) {\n    if (!this.user || !this.user.accountId) return\n    const account = this.walletConnection.account()\n    const abi = {\n      changeMethods: [],\n      viewMethods: [],\n      ...abiMethods,\n    }\n\n    // Sender is the account ID to initialize transactions.\n    return new this.nearApi.Contract(\n      account,\n      contract_id,\n      { ...abi, sender: account.accountId }\n    )\n  }\n\n}\n\n// Register NEAR plugin with Vue\nexport default {\n  install: async (app, { env, config }) => {\n    // Add global context and methods for NEAR\n    app.config.globalProperties.$near = await new VueNear(env, config)\n    await app.config.globalProperties.$near.loadNearProvider()\n    await app.config.globalProperties.$near.loadAccount()\n\n    app.provide('$user', app.config.globalProperties.$near.user)\n\n    // enable re-instantiation\n    app.config.globalProperties.$nearInit = () => {\n      return new VueNear(env, config).loadNearProvider()\n    }\n\n    // TODO: Add convenience methods for VUEX\n  },\n}", "import d from \"./node_modules/vue-near/src/index.js\";export default d;\nexport * from \"./node_modules/vue-near/src/index.js\""],
  "mappings": "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",
  "names": []
}
